import logging
from datetime import UTC, datetime
from typing import Optional

from src.parking_velo.config.filters import ParkingVeloFilters
from src.itineraire.domain.usecases.calcul_itineraire_velo import calcul_itineraire_velo
from src.itineraire.infrastructure.api_handler import ApiHandler


def itineraire_parking_velo(
    departure_address: str,
    arrival_address: str,
    to_parking: bool,
    travel_datetime: Optional[datetime] = None,
    get_forecast: bool = True,
    parking_filter: ParkingVeloFilters = ParkingVeloFilters.default,
) -> dict:
    api_handler = ApiHandler()

    if travel_datetime:
        if travel_datetime.tzinfo is None:
            raise ValueError("travel_datetime doit être en timezone UTC")
    else:
        travel_datetime = datetime.now(UTC)

    itinerary = calcul_itineraire_velo(
        source_handler=api_handler,
        departure_name=departure_address,
        arrival_name=arrival_address,
        to_parking=to_parking,
        parking_filter=parking_filter,
        travel_datetime=travel_datetime,
        get_forecast=get_forecast,
    )
    return itinerary


if __name__ == "__main__":
    itinerary = itineraire_parking_velo(
        departure_address="34 avenue de l'opera",
        arrival_address="62 Rue Jean-Jacques Rousseau",
        to_parking=True,
        travel_datetime=None,
        get_forecast=True,
        parking_filter=ParkingVeloFilters.casier,
    )
    print(itinerary)
    logging.info(itinerary)


### Exemple de sortie ###

# {'itinerary_velo': [{'sections': [{'transportMode': 'BIKE', 'duration': 1160, 'waypointsIndices': [0, 214], 'geometry': '}que|AeilmCmEvAa@`@oBn@u@{@h@qCDiCkBwj@G{BJaKmCoA{b@cPoN_EgBOoBKsB@}A?eHCuA@qAAsj@@gAFu@D}Df@sDd@e@Au@Cug@uGsj@kPgBi@jCs`@b@eEdAiOlImjAXyDaBc@mBe@uBk@y`@eKuBm@mEkAcMiDwBk@gQoEuTeGaBk@_GwAwBi@_Cs@iAwGgHgb@eDcR{AkJaA{EiAgHiAuGiG{]iAqGYcByCaQq@iEiAmG_A{FsEoXmAkHg@}C}AoJkKco@QcAgBeJaB}Ho@}CgCkP{BgNYgBm@_@eB}A{JgJgU}Ti@e@q@e@mBeAqXgHqOaE_Dy@wCw@{g@aLgGuA{GqDiEqCqOyJ}AaAcB_AyCyB}[kToPwKgBaAqBwAcH{DcLqDuC_AuMsE_IcA{OgAcBSmMu@cn@mF{Fi@gCu@_TcDcB[qg@yI_BY?}Ce@uBm@aA}@u@}@MyCd@F}EgKqhByA{U{AwNeFZcGn@iFC{HIy@?{ACaCAsAAaJOeCsGiCAq`@M_AAiCA{ACkIMiDCwDCco@i@eEGaBAmAAsCAqSO{CHoJMyGKi@EwAE_D?ok@KcBAw@?_@?iDAq{@W{ACuAAaAAgA?wNC{d@RgB?{@@wABuA@kRu@eUE}A~AsAdE_@AeKAqFsEiCn@eDhCyS~PsFbEeAv@_WvRmEbEsk@~d@aAr@yQvMeAv@o]rXgAt@mAz@kCrB{BhBoP|MqAdAg\\pWeM~IkBbByV~ReCtB_mAt`AeBjBsExCyAdA`@rFd@pGh@`Hf@zGtAEn@HhBdAMj@QlAt@RlEpC`CrA', 'estimatedDatetimeOfDeparture': '2025-11-14T11:45:13.900265', 'estimatedDatetimeOfArrival': '2025-11-14T12:04:33.900265', 'details': {'distances': {'total': 4159, 'normalRoads': 1118, 'recommendedRoads': 3018, 'discouragedRoads': 23, 'cycleway': 2136, 'greenway': 0, 'lane': 526, 'livingstreet': 187, 'sharebusway': 277, 'footway': 47, 'pedestrian': 32, 'opposite': 0, 'steps': 0, 'zone30': 0, 'residential': 931}, 'instructions': None, 'profile': 'MEDIAN', 'direction': 'Rue Marguerite de Rochechouart, Boulevard Barbès', 'verticalGain': 36, 'verticalLoss': 18, 'calories': 109175, 'elevations': None, 'ridesets': [], 'averageSpeed': 15, 'bikeType': 'TRADITIONAL'}, 'waypoints': [{'longitude': 2.33337, 'latitude': 48.868659, 'title': None}, {'longitude': 2.3440768, 'latitude': 48.8971844, 'title': None}]}], 'distances': {'total': 4159, 'normalRoads': 1118, 'recommendedRoads': 3018, 'discouragedRoads': 23}, 'title': 'RECOMMENDED', 'waypoints': [{'longitude': 2.33337, 'latitude': 48.868659, 'title': None}, {'longitude': 2.3440768, 'latitude': 48.8971844, 'title': None}], 'estimatedDatetimeOfDeparture': '2025-11-14T11:45:13.900265', 'estimatedDatetimeOfArrival': '2025-11-14T12:04:33.900265', 'duration': 1160, 'id': 'bG9jPTQ4Ljg2ODY1OTAwMDQ3MDk2LDIuMzMzMzcwMDA0ODk0MTk0JmxvYz00OC44OTcxODQzOTk5ODY0MTUsMi4zNDQwNzY4MDAwMDAwMDAzI01FRElBTiNGYWxzZSNNRURJQU4jMTUjRmFsc2UjTm9uZSMyMDI1LTExLTE0IDExOjQ1OjEzLjkwMDI2NSNUUkFESVRJT05BTCMwIzAjUkVDT01NRU5ERUQjRmFsc2UjRmFsc2U='}, {'sections': [{'transportMode': 'BIKE', 'duration': 1246, 'waypointsIndices': [0, 251], 'geometry': '}que|AeilmCmEvAa@`@oBn@u@{@h@qCDiCkBwj@G{BJaKmCoA{b@cPoN_EgBOoBKsB@}A?eHCuA@qAAsj@@gAFu@D}Df@sDd@e@Au@Cug@uGsj@kPgBi@jCs`@b@eEdAiOlImjAXyDaBc@mBe@uBk@y`@eKuBm@mEkAcMiDwBk@gQoEuTeGaBk@_GwAwBi@_Cs@iAwGgHgb@eDcR{AkJaA{EiAgHiAuGiG{]iAqGYcByCaQq@iEiAmG_A{FsEoXmAkHg@}C}AoJkKco@QcAgBeJaB}Ho@}CgCkP{BgNYgBWmBs@cFoHwe@sD_UeHub@gAyGuEoX}AcJyCqRs@uDsAqEs@mD{EwWg@yE}@mGoUsuAuBgMaAwFiEwVqDmTqKgn@iGc_@SoAi@mDgCuNw@gEkF_\\oAoHMw@q@{DeUutAYgB[{Ao@qBa@{@{AwFa@eDKaAk@uGe@T}@bAo@dAk@nASrASlAEpAMb@_Av@YX{[bYyHxG_CpBo@j@{BjBs@j@mAjAii@`e@oErDQN[BUCu@UgAWs@Cc@BSBWJ{@t@k@l@k@t@e@~@Mt@Mx@MlAMvB{KvJaj@`f@uYrVcB~AibAh{@_DjCkPvOu@rAUh@oCxGeFZcGn@iFC{HIy@?{ACaCAsAAaJOeCsGiCAq`@M_AAiCA{ACkIMiDCwDCco@i@eEGaBAmAAsCAqSO{CHoJMyGKi@EwAE_D?ok@KcBAw@?_@?iDAq{@W{ACuAAaAAgA?wNC{d@RgB?{@@wABuA@kRu@eUE}A~AsAdE_@AeKAqFsEiCn@eDhCyS~PsFbEeAv@_WvRmEbEsk@~d@aAr@yQvMeAv@o]rXgAt@mAz@kCrB{BhBoP|MqAdAg\\pWeM~IkBbByV~ReCtB_mAt`AeBjBsExCyAdA`@rFd@pGh@`Hf@zGtAEn@HhBdAMj@QlAt@RlEpC`CrA', 'estimatedDatetimeOfDeparture': '2025-11-14T11:45:13.900265', 'estimatedDatetimeOfArrival': '2025-11-14T12:05:59.900265', 'details': {'distances': {'total': 4597, 'normalRoads': 608, 'recommendedRoads': 3966, 'discouragedRoads': 23, 'cycleway': 3636, 'greenway': 0, 'lane': 154, 'livingstreet': 187, 'sharebusway': 97, 'footway': 47, 'pedestrian': 32, 'opposite': 0, 'steps': 0, 'zone30': 0, 'residential': 421}, 'instructions': None, 'profile': 'BEGINNER', 'direction': 'Rue La Fayette, Boulevard Barbès', 'verticalGain': 30, 'verticalLoss': 12, 'calories': 109139, 'elevations': None, 'ridesets': [], 'averageSpeed': 15, 'bikeType': 'TRADITIONAL'}, 'waypoints': [{'longitude': 2.33337, 'latitude': 48.868659, 'title': None}, {'longitude': 2.3440768, 'latitude': 48.8971844, 'title': None}]}], 'distances': {'total': 4597, 'normalRoads': 608, 'recommendedRoads': 3966, 'discouragedRoads': 23}, 'title': 'SAFER', 'waypoints': [{'longitude': 2.33337, 'latitude': 48.868659, 'title': None}, {'longitude': 2.3440768, 'latitude': 48.8971844, 'title': None}], 'estimatedDatetimeOfDeparture': '2025-11-14T11:45:13.900265', 'estimatedDatetimeOfArrival': '2025-11-14T12:05:59.900265', 'duration': 1246, 'id': 'bG9jPTQ4Ljg2ODY1OTAwMDQ3MDk2LDIuMzMzMzcwMDA0ODk0MTk0JmxvYz00OC44OTcxODQzOTk5ODY0MTUsMi4zNDQwNzY4MDAwMDAwMDAzI0JFR0lOTkVSI0ZhbHNlI01FRElBTiMxNSNGYWxzZSNOb25lIzIwMjUtMTEtMTQgMTE6NDU6MTMuOTAwMjY1I1RSQURJVElPTkFMIzAjMCNTQUZFUiNGYWxzZSNGYWxzZQ=='}, {'sections': [{'transportMode': 'BIKE', 'duration': 1131, 'waypointsIndices': [0, 198], 'geometry': '}que|AeilmCmEvAa@`@oBn@u@{@h@qCDiCkBwj@G{BJaK?oDFey@AeDmB{@aYkMeDeAoKg@_C[aAcFgAa@o@?eGGiOEyAGwx@XyBVsB\\i@wFk@aG{D}a@q@kHo@{G]iDiGeBkg@_MsBg@aBc@mBe@uBk@y`@eKuBm@mEkAcMiDwBk@gQoEuTeGaBk@_GwAwBi@_Cs@iAwGgHgb@eDcR{AkJaA{EiAgHiAuGiG{]iAqGYcByCaQq@iEiAmG_A{FsEoXmAkHg@}C}AoJkKco@QcAgBeJaB}Ho@}CgCkP{BgNYgBm@_@eB}A{JgJgU}Ti@e@q@e@mBeAqXgHqOaE_Dy@wCw@{g@aLgGuA{GqDiEqCqOyJ}AaAcB_AyCyB}[kToPwKgBaAqBwAcH{DcLqDuC_AuMsE_IcA{OgAcBSmMu@cn@mF{Fi@gCu@_TcDcB[qg@yI_BY?}Ce@uBm@aA}@u@}@MyCd@eH|BgDbAsAf@a@?qJgAm@G}i@uGaEe@{B[gRiC_CWoe@sG_BO{ASa[eEkI{@yC?sOoBuHy@mBKuCgB{Du@yB]}PmBss@kJqFa@}C_@{^oFoBW{Be@{IeAk`AqMuEu@cEe@gk@sHaTaDcCMcC]yC[wW{DaDuCwA}AdBmAgA_EoAmE_WvRmEbEsk@~d@aAr@yQvMeAv@o]rXgAt@mAz@kCrB{BhBoP|MqAdAg\\pWeM~IkBbByV~ReCtB_mAt`AeBjBsExCyAdA`@rFd@pGh@`Hf@zGtAEn@HhBdAMj@QlAt@RlEpC`CrA', 'estimatedDatetimeOfDeparture': '2025-11-14T11:45:13.900265', 'estimatedDatetimeOfArrival': '2025-11-14T12:04:04.900265', 'details': {'distances': {'total': 3976, 'normalRoads': 1628, 'recommendedRoads': 2258, 'discouragedRoads': 90, 'cycleway': 1131, 'greenway': 0, 'lane': 765, 'livingstreet': 13, 'sharebusway': 315, 'footway': 47, 'pedestrian': 0, 'opposite': 0, 'steps': 0, 'zone30': 0, 'residential': 1615}, 'instructions': None, 'profile': 'EXPERT', 'direction': 'Rue Marguerite de Rochechouart, Rue de Clignancourt', 'verticalGain': 44, 'verticalLoss': 26, 'calories': 114793, 'elevations': None, 'ridesets': [], 'averageSpeed': 15, 'bikeType': 'TRADITIONAL'}, 'waypoints': [{'longitude': 2.33337, 'latitude': 48.868659, 'title': None}, {'longitude': 2.3440768, 'latitude': 48.8971844, 'title': None}]}], 'distances': {'total': 3976, 'normalRoads': 1628, 'recommendedRoads': 2258, 'discouragedRoads': 90}, 'title': 'FASTER', 'waypoints': [{'longitude': 2.33337, 'latitude': 48.868659, 'title': None}, {'longitude': 2.3440768, 'latitude': 48.8971844, 'title': None}], 'estimatedDatetimeOfDeparture': '2025-11-14T11:45:13.900265', 'estimatedDatetimeOfArrival': '2025-11-14T12:04:04.900265', 'duration': 1131, 'id': 'bG9jPTQ4Ljg2ODY1OTAwMDQ3MDk2LDIuMzMzMzcwMDA0ODk0MTk0JmxvYz00OC44OTcxODQzOTk5ODY0MTUsMi4zNDQwNzY4MDAwMDAwMDAzI0VYUEVSVCNGYWxzZSNNRURJQU4jMTUjRmFsc2UjTm9uZSMyMDI1LTExLTE0IDExOjQ1OjEzLjkwMDI2NSNUUkFESVRJT05BTCMwIzAjRkFTVEVSI0ZhbHNlI0ZhbHNl'}], 'itinerary_marche': {'duration': 4168, 'nb_transfers': 0, 'departure_date_time': '20251114T114514', 'arrival_date_time': '20251114T125442', 'requested_date_time': '20251114T114514', 'type': 'non_pt_walk', 'status': '', 'tags': ['walking', 'non_pt', 'non_pt_walking', 'ecologic'], 'co2_emission': {'value': 0.0, 'unit': 'gEC'}, 'air_pollutants': {'unit': 'g', 'values': {'nox': 0.0, 'pm': 0.0}}, 'durations': {'total': 4168, 'walking': 4168, 'bike': 0, 'car': 0, 'ridesharing': 0, 'taxi': 0}, 'distances': {'walking': 4333, 'bike': 0, 'car': 0, 'ridesharing': 0, 'taxi': 0}, 'fare': {'found': False, 'links': []}, 'sections': [{'id': 'section_0_0', 'duration': 4168, 'co2_emission': {'value': 0.0, 'unit': 'gEC'}, 'departure_date_time': '20251114T114514', 'arrival_date_time': '20251114T125442', 'to': {'id': '2.343742;48.864098', 'name': '62 Rue Jean-Jacques Rousseau (Paris)', 'quality': 0, 'embedded_type': 'address', 'address': {'id': '2.343742;48.864098', 'coord': {'lon': '2.3437420048902635', 'lat': '48.86409800047028'}, 'house_number': 62, 'label': '62 Rue Jean-Jacques Rousseau (Paris)', 'name': '62 Rue Jean-Jacques Rousseau', 'administrative_regions': [{'id': 'admin:osm:relation:2172737', 'insee': '', 'name': 'Quartier Les Halles', 'label': 'Quartier Les Halles (75001)', 'level': 10, 'coord': {'lon': '2.344892915006974', 'lat': '48.86228527610997'}, 'zip_code': '75001'}, {'id': 'admin:fr:75056', 'insee': '75056', 'name': 'Paris', 'label': 'Paris (75000-75116)', 'level': 8, 'coord': {'lon': '2.3483915', 'lat': '48.8534951'}, 'zip_code': '75000-75116'}, {'id': 'admin:osm:relation:71525', 'insee': '75', 'name': 'Paris', 'label': 'Paris', 'level': 6, 'coord': {'lon': '2.3483915', 'lat': '48.8534951'}, 'zip_code': None}, {'id': 'admin:osm:relation:8649', 'insee': '11', 'name': 'Île-de-France', 'label': 'Île-de-France', 'level': 4, 'coord': {'lon': '2.3483915', 'lat': '48.8534951'}, 'zip_code': None}, {'id': 'admin:osm:relation:2202162', 'insee': '', 'name': 'France', 'label': 'France', 'level': 2, 'coord': {'lon': '2.3483915', 'lat': '48.8534951'}, 'zip_code': None}, {'id': 'admin:osm:relation:20727', 'insee': '75101', 'name': 'Paris 1er Arrondissement', 'label': 'Paris 1er Arrondissement (75001)', 'level': 9, 'coord': {'lon': '2.334396', 'lat': '48.8646144'}, 'zip_code': '75001'}]}}, 'from': {'id': '2.344036;48.897183', 'name': '65 Rue Letort (Paris)', 'quality': 0, 'embedded_type': 'address', 'address': {'id': '2.344036;48.897183', 'coord': {'lon': '2.3440768000000003', 'lat': '48.897184399986415'}, 'house_number': 65, 'label': '65 Rue Letort (Paris)', 'name': '65 Rue Letort', 'administrative_regions': [{'id': 'admin:osm:relation:2195154', 'insee': '', 'name': 'Quartier de Clignancourt', 'label': 'Quartier de Clignancourt (75018)', 'level': 10, 'coord': {'lon': '2.3459776021788175', 'lat': '48.891666885370014'}, 'zip_code': '75018'}, {'id': 'admin:fr:75056', 'insee': '75056', 'name': 'Paris', 'label': 'Paris (75000-75116)', 'level': 8, 'coord': {'lon': '2.3483915', 'lat': '48.8534951'}, 'zip_code': '75000-75116'}, {'id': 'admin:osm:relation:71525', 'insee': '75', 'name': 'Paris', 'label': 'Paris', 'level': 6, 'coord': {'lon': '2.3483915', 'lat': '48.8534951'}, 'zip_code': None}, {'id': 'admin:osm:relation:8649', 'insee': '11', 'name': 'Île-de-France', 'label': 'Île-de-France', 'level': 4, 'coord': {'lon': '2.3483915', 'lat': '48.8534951'}, 'zip_code': None}, {'id': 'admin:osm:relation:2202162', 'insee': '', 'name': 'France', 'label': 'France', 'level': 2, 'coord': {'lon': '2.3483915', 'lat': '48.8534951'}, 'zip_code': None}, {'id': 'admin:osm:relation:9531', 'insee': '75118', 'name': 'Paris 18e Arrondissement', 'label': 'Paris 18e Arrondissement (75018)', 'level': 9, 'coord': {'lon': '2.3464668', 'lat': '48.890011699999995'}, 'zip_code': '75018'}]}}, 'geojson': {'type': 'LineString', 'coordinates': [[2.3440768, 48.8971844], [2.344113, 48.89717], [2.344208, 48.89732], [2.344241, 48.897369], [2.34427, 48.89736], [2.344302, 48.897352], [2.344338, 48.897351], [2.344436, 48.897354], [2.344569, 48.89735], [2.344579, 48.897349], [2.34468, 48.897354], [2.344699, 48.897331], [2.344722, 48.897338], [2.344838, 48.89738], [2.345019, 48.897156], [2.345662, 48.896415], [2.345949, 48.896075], [2.345993, 48.896025], [2.346329, 48.895618], [2.346363, 48.895578], [2.34648, 48.89544], [2.346571, 48.895326], [2.346941, 48.894876], [2.347032, 48.894766], [2.347146, 48.894628], [2.347364, 48.894344], [2.347429, 48.894259], [2.347761, 48.893863], [2.347938, 48.893652], [2.348083, 48.893487], [2.348263, 48.893279], [2.348672, 48.892776], [2.348807, 48.89262], [2.349029, 48.892368], [2.349118, 48.892255], [2.349268, 48.89207], [2.349502, 48.891797], [2.349577, 48.891683], [2.349604, 48.891575], [2.349603, 48.891375], [2.349601, 48.891238], [2.3496, 48.891056], [2.349596, 48.890608], [2.349597, 48.890506], [2.349594, 48.890406], [2.349593, 48.88983], [2.349594, 48.889605], [2.349592, 48.889478], [2.349585, 48.889418], [2.349574, 48.888454], [2.349573, 48.888355], [2.349572, 48.888279], [2.349565, 48.887895], [2.349561, 48.887771], [2.349559, 48.887579], [2.349559, 48.887557], [2.349556, 48.887416], [2.349554, 48.887273], [2.349552, 48.887171], [2.349551, 48.88709], [2.349544, 48.886684], [2.349541, 48.886552], [2.349539, 48.886422], [2.349537, 48.886281], [2.34953, 48.885886], [2.349527, 48.885709], [2.349526, 48.885688], [2.349526, 48.885683], [2.349526, 48.885656], [2.349525, 48.885625], [2.349524, 48.88552], [2.349518, 48.885276], [2.34951, 48.885159], [2.349504, 48.884946], [2.349494, 48.884628], [2.349496, 48.884489], [2.349488, 48.884312], [2.349487, 48.88427], [2.349485, 48.884205], [2.349484, 48.884159], [2.349484, 48.88413], [2.349479, 48.883972], [2.349477, 48.883855], [2.349501, 48.883725], [2.349515, 48.88361], [2.349576, 48.883505], [2.349696, 48.883398], [2.349788, 48.883293], [2.349868, 48.883187], [2.349752, 48.883146], [2.349719, 48.883133], [2.349675, 48.883114], [2.349637, 48.883089], [2.349617, 48.883054], [2.34967, 48.882397], [2.349679, 48.882348], [2.349826, 48.881155], [2.34983, 48.881094], [2.349835, 48.881013], [2.349858, 48.880644], [2.349818, 48.880518], [2.349801, 48.880465], [2.349563, 48.879775], [2.349523, 48.879683], [2.349363, 48.879637], [2.349037, 48.879539], [2.348749, 48.879453], [2.348567, 48.879398], [2.348551, 48.879267], [2.347253, 48.877827], [2.347246, 48.877819], [2.347187, 48.877753], [2.34705, 48.877602], [2.346882, 48.877426], [2.346827, 48.877411], [2.346706, 48.877379], [2.34669, 48.877347], [2.346656, 48.877322], [2.34641, 48.877255], [2.345848, 48.877103], [2.34587, 48.877021], [2.34595, 48.876887], [2.345958, 48.876864], [2.345953, 48.876841], [2.345934, 48.876808], [2.346017, 48.876676], [2.346071, 48.876589], [2.346102, 48.87655], [2.346132, 48.876513], [2.346155, 48.876485], [2.346174, 48.876462], [2.345987, 48.876413], [2.34591, 48.876393], [2.345581, 48.876308], [2.345576, 48.876217], [2.345554, 48.875984], [2.34555, 48.87594], [2.345544, 48.875889], [2.345333, 48.874085], [2.345327, 48.874034], [2.345223, 48.874034], [2.34502, 48.874035], [2.345006, 48.874035], [2.344896, 48.874035], [2.344841, 48.873993], [2.344753, 48.873936], [2.343803, 48.87345], [2.343348, 48.873217], [2.34317, 48.873125], [2.343136, 48.873112], [2.343048, 48.873077], [2.343062, 48.873028], [2.343082, 48.872953], [2.343092, 48.872904], [2.343126, 48.87269], [2.343139, 48.872606], [2.343188, 48.8723], [2.343198, 48.872172], [2.343177, 48.872007], [2.343092, 48.8716], [2.343082, 48.871552], [2.343068, 48.871482], [2.34305, 48.871429], [2.343027, 48.871365], [2.343009, 48.871315], [2.342861, 48.870859], [2.342839, 48.870791], [2.342791, 48.870658], [2.34273, 48.870472], [2.342677, 48.870297], [2.342699, 48.870231], [2.34272, 48.870151], [2.34275, 48.870029], [2.342796, 48.869927], [2.342851, 48.86981], [2.342884, 48.869758], [2.343178, 48.869143], [2.343259, 48.868981], [2.343351, 48.868776], [2.343416, 48.868622], [2.343433, 48.868582], [2.343499, 48.868425], [2.343565, 48.868267], [2.343604, 48.868169], [2.343656, 48.868047], [2.343668, 48.86802], [2.343678, 48.867995], [2.343765, 48.867784], [2.34386, 48.867556], [2.343925, 48.867399], [2.343955, 48.867327], [2.343937, 48.867253], [2.343929, 48.867208], [2.343867, 48.866884], [2.34386, 48.866851], [2.343857, 48.866841], [2.343844, 48.866764], [2.343803, 48.866672], [2.343781, 48.866628], [2.343765, 48.866596], [2.34333, 48.865778], [2.34331, 48.865739], [2.343208, 48.86554], [2.343146, 48.865418], [2.343135, 48.865395], [2.343128, 48.86538], [2.343086, 48.865292], [2.343043, 48.86521], [2.34303, 48.865185], [2.342776, 48.864706], [2.342705, 48.864572], [2.342661, 48.864489], [2.342558, 48.864284], [2.342437, 48.864051], [2.342422, 48.864022], [2.34241, 48.863999], [2.342357, 48.863896], [2.342449, 48.863835], [2.342471, 48.86382], [2.342651, 48.863691], [2.342687, 48.863665], [2.342729, 48.863643], [2.342842, 48.863712], [2.343688, 48.864145], [2.3437420049, 48.8640980005]], 'properties': [{'length': 4333}]}, 'mode': 'walking', 'type': 'street_network', 'links': [{'href': 'https://api-idfm.navitia.io/v1/coverage/idfm/elevations?polyline=_img%7CAyganCZgAkH%7DDaBaAPy%40N_A%40gAEcEFiG%40SIiEl%40e%40Mm%40sAgF~LiJhm%40eg%40fT%7DPbBwAlX_TnAcArGiFbFuDb%5BcVzEuDrGcFvPsLhDaCvWwSdLaJhIaH~KgJl%5EqXvHmGvN%7BL%60FqDpJkH%60PsMbFuCvEu%40nK%40pGBjJ%40~ZFjEAfED~b%40%40%60MA%7CFBvBLf%7B%40TdE%40vC%40~VLvFF~JBj%40%3FxGD%7CGBjEB%60D%40jXLfGDbGBxGBtWL%60JDh%40%40H%3Ft%40%3F%7C%40%40pE%40fNJhFNhLJzRRtGC%60JNrA%40%60CBzA%40x%40%3FzHHhFBbGo%40dF%5BpEyBtEoFpEwDrE_DpAfFX%60Ad%40vAp%40jAdAf%40%60h%40iB%60BQpiAeHxBG%60DI%60Vm%40zFnAhB%60%40bj%40zMvDnAzA~HbEjSjD~PlBjJdG%5E~xAbpANLbCtBlHpG~InI%5ClB~%40pF~%40%5Ep%40bAdCjNnHbb%40bDk%40jG_Dl%40Ol%40H%60Ad%40fGeDlDkBlA%7D%40hA%7B%40v%40m%40l%40e%40%60BtJf%40xChDpStDHpMj%40vAFdBJvoBdLdBJ%3FnEAtK%3FZ%3FzErAlBpBnDj%5Djz%40pMl%5BvDbJXbAdAnD%60B%5BtCg%40%60BSjLcAfDYbRaB~FShIh%40lXhD~ARjCZhBb%40~Bl%40bBb%40n%5BfHfCj%40hG~ArJxB%7CIhBbCk%40~Ci%40rF%7B%40jE%7BAhFmBfBaAle%40kQbIaDxKwDrHaCnAa%40xHcCzHcCbEmArFgBt%40Wp%40SdLmDfM%7DDxHaCnC%7B%40rCb%40xANfSzB%60ALRDxCXvDpAvAj%40~%40%5Ebr%40dZlAf%40lKjErFzBl%40T%5CLnDrAbDtAp%40X%7C%5CzNjGlCdDvAxKlEpMpFx%40%5Cl%40VlEhBxBwD%5Ck%40%60GgJr%40gAj%40sAiCaFaZ%7Bs%40%7CAkB', 'templated': False, 'rel': 'elevations', 'type': 'elevations'}], 'path': [{'length': 24, 'name': 'Rue Letort', 'duration': 20, 'direction': 0, 'instruction': 'Marchez vers le nord sur Rue Letort. Continuez sur 24 m.', 'instruction_start_coordinate': {'lon': '2.344113', 'lat': '48.89717'}}, {'length': 33, 'name': '', 'duration': 33, 'direction': 92, 'instruction': "Tournez à droite dans l'allée. Continuez sur 33 m.", 'instruction_start_coordinate': {'lon': '2.344241', 'lat': '48.897369'}}, {'length': 3, 'name': '', 'duration': 3, 'direction': 62, 'instruction': "Tournez à droite dans l'allée. Continuez sur 3 m.", 'instruction_start_coordinate': {'lon': '2.34468', 'lat': '48.897354'}}, {'length': 12, 'name': '', 'duration': 10, 'direction': -86, 'instruction': "Tournez à gauche dans l'allée. Continuez sur 12 m.", 'instruction_start_coordinate': {'lon': '2.344699', 'lat': '48.897331'}}, {'length': 247, 'name': 'Boulevard Ornano', 'duration': 248, 'direction': 91, 'instruction': 'Tournez à droite dans Boulevard Ornano. Continuez sur 247 m.', 'instruction_start_coordinate': {'lon': '2.344838', 'lat': '48.89738'}}, {'length': 102, 'name': 'Boulevard Ornano', 'duration': 96, 'direction': 1, 'instruction': 'Restez à droite pour rester sur Boulevard Ornano. Continuez sur 102 m.', 'instruction_start_coordinate': {'lon': '2.34648', 'lat': '48.89544'}}, {'length': 1323, 'name': 'Boulevard Ornano', 'duration': 1347, 'direction': 2, 'instruction': 'Restez à droite pour rester sur Boulevard Ornano. Continuez sur 1323 m.', 'instruction_start_coordinate': {'lon': '2.347146', 'lat': '48.894628'}}, {'length': 404, 'name': 'Rue du Faubourg Poissonnière', 'duration': 357, 'direction': 90, 'instruction': 'Tournez à droite dans Rue du Faubourg Poissonnière. Continuez sur 404 m.', 'instruction_start_coordinate': {'lon': '2.349868', 'lat': '48.883187'}}, {'length': 77, 'name': 'Rue de Maubeuge', 'duration': 69, 'direction': 50, 'instruction': 'Tournez à droite dans Rue de Maubeuge. Continuez sur 77 m.', 'instruction_start_coordinate': {'lon': '2.349523', 'lat': '48.879683'}}, {'length': 254, 'name': 'Rue Pierre Semard', 'duration': 215, 'direction': -60, 'instruction': 'Tournez à gauche dans Rue Pierre Semard. Continuez sur 254 m.', 'instruction_start_coordinate': {'lon': '2.348567', 'lat': '48.87939799999999'}}, {'length': 14, 'name': 'Rue Rochambeau', 'duration': 13, 'direction': 35, 'instruction': 'Restez à droite dans Rue Rochambeau. Continuez sur 14 m.', 'instruction_start_coordinate': {'lon': '2.346882', 'lat': '48.877426'}}, {'length': 106, 'name': '', 'duration': 94, 'direction': -19, 'instruction': 'Restez à gauche à la fourche. Continuez sur 106 m.', 'instruction_start_coordinate': {'lon': '2.346706', 'lat': '48.877379'}}, {'length': 43, 'name': 'Rue Mayran', 'duration': 40, 'direction': -18, 'instruction': 'Restez à gauche dans Rue Mayran. Continuez sur 43 m.', 'instruction_start_coordinate': {'lon': '2.345934', 'lat': '48.876808'}}, {'length': 47, 'name': 'Rue La Fayette', 'duration': 41, 'direction': 97, 'instruction': 'Tournez à droite dans Rue La Fayette. Continuez sur 47 m.', 'instruction_start_coordinate': {'lon': '2.346174', 'lat': '48.876462'}}, {'length': 254, 'name': 'Rue de Trévise', 'duration': 216, 'direction': -67, 'instruction': 'Tournez à gauche dans Rue de Trévise. Continuez sur 253 m.', 'instruction_start_coordinate': {'lon': '2.345581', 'lat': '48.87630799999999'}}, {'length': 32, 'name': 'Rue Richer', 'duration': 29, 'direction': 86, 'instruction': 'Tournez à droite dans Rue Richer. Continuez sur 32 m.', 'instruction_start_coordinate': {'lon': '2.345327', 'lat': '48.87403399999999'}}, {'length': 172, 'name': 'Rue Geoffroy Marie', 'duration': 157, 'direction': -49, 'instruction': 'Restez à gauche dans Rue Geoffroy Marie. Continuez sur 172 m.', 'instruction_start_coordinate': {'lon': '2.344896', 'lat': '48.874035'}}, {'length': 989, 'name': 'Rue du Faubourg Montmartre', 'duration': 977, 'direction': -70, 'instruction': 'Tournez à gauche dans Rue du Faubourg Montmartre. Continuez sur 989 m.', 'instruction_start_coordinate': {'lon': '2.343048', 'lat': '48.87307699999999'}}, {'length': 69, 'name': 'Rue du Louvre', 'duration': 72, 'direction': -1, 'instruction': 'Restez à gauche pour prendre Rue du Louvre. Continuez sur 69 m.', 'instruction_start_coordinate': {'lon': '2.342661', 'lat': '48.864489'}}, {'length': 39, 'name': 'Rue Coquillière', 'duration': 43, 'direction': -64, 'instruction': 'Tournez à gauche dans Rue Coquillière. Continuez sur 39 m.', 'instruction_start_coordinate': {'lon': '2.342357', 'lat': '48.863896'}}, {'length': 90, 'name': 'Rue Jean-Jacques Rousseau', 'duration': 88, 'direction': -86, 'instruction': 'Tournez à gauche dans Rue Jean-Jacques Rousseau. Continuez sur 89 m.', 'instruction_start_coordinate': {'lon': '2.342729', 'lat': '48.863643'}}, {'length': 0, 'name': '', 'duration': 0, 'direction': 0, 'instruction': 'Votre destination est sur la droite.', 'instruction_start_coordinate': {'lon': '2.343688', 'lat': '48.864145'}}]}]}, 'meteo_forecast': {'insee': '75056', 'cp': 75000, 'latitude': 48.8542, 'longitude': 2.3574, 'datetime': '2025-11-14T11:00:00+0100', 'temp2m': 17, 'rh2m': 50, 'wind10m': 8, 'gust10m': 30, 'dirwind10m': 166, 'rr10': 0.0, 'rr1': 0.0, 'probarain': 0, 'weather': 4, 'probafrost': 0, 'probafog': 0, 'probawind70': 0, 'probawind100': 0, 'tsoil1': 15, 'tsoil2': 14, 'gustx': 30, 'iso0': 2730}}